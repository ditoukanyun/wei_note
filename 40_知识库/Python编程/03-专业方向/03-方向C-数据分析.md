---
title: Python数据分析
description: 数据分析核心工具链 - NumPy、pandas、Matplotlib、数据清洗与可视化（Day66-80）
date: 2026-02-10
tags:
  - python
  - data-analysis
  - numpy
  - pandas
  - matplotlib
  - visualization
category: 专业方向
status: active
direction: 数据分析
aliases:
  - 数据分析
  - Data Analysis
  - Day66-80
parent: "[[00-导航-Python编程导航]]"
up: "[[00-MOC-知识地图]]"
---

# Python数据分析 (Day 66-80)

> 掌握Python数据分析核心工具链：NumPy、pandas和数据可视化

---

## NumPy基础

### 数组创建

```python
import numpy as np

# 创建数组
arr1 = np.array([1, 2, 3, 4, 5])
arr2 = np.array([[1, 2, 3], [4, 5, 6]])

# 特殊数组
zeros = np.zeros((3, 4))
ones = np.ones((2, 3))
full = np.full((2, 2), 7)
eye = np.eye(3)

# 序列数组
arange = np.arange(0, 10, 2)        # [0, 2, 4, 6, 8]
linspace = np.linspace(0, 1, 5)     # 5个均匀分布的点

# 随机数组
rand = np.random.rand(3, 3)         # 0-1均匀分布
randn = np.random.randn(3, 3)       # 标准正态分布
randint = np.random.randint(1, 10, (3, 3))
```

### 数组操作

```python
arr = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])

# 属性
print(arr.shape)     # (3, 3)
print(arr.ndim)      # 2
print(arr.size)      # 9
print(arr.dtype)     # int64

# 索引和切片
print(arr[0, 1])     # 2
print(arr[0:2, 1:3]) # [[2, 3], [5, 6]]
print(arr[:, 1])     # [2, 5, 8]

# 布尔索引
print(arr[arr > 5])  # [6, 7, 8, 9]

# 数学运算
a = np.array([1, 2, 3])
b = np.array([4, 5, 6])

print(a + b)         # [5, 7, 9]
print(a * b)         # [4, 10, 18]
print(np.dot(a, b))  # 32 (点积)

# 统计函数
arr = np.array([[1, 2, 3], [4, 5, 6]])
print(np.sum(arr))           # 21
print(np.sum(arr, axis=0))   # 按列求和 [5, 7, 9]
print(np.sum(arr, axis=1))   # 按行求和 [6, 15]
print(np.mean(arr))          # 平均值
print(np.std(arr))           # 标准差
print(np.max(arr))           # 最大值
print(np.min(arr))           # 最小值
```

---

## pandas核心

### Series和DataFrame

```python
import pandas as pd
import numpy as np

# Series
s = pd.Series([1, 3, 5, np.nan, 6, 8])
print(s)

# DataFrame
df = pd.DataFrame({
    'name': ['Alice', 'Bob', 'Charlie'],
    'age': [25, 30, 35],
    'city': ['NY', 'LA', 'Chicago']
})

# 从数组创建
df = pd.DataFrame(
    np.random.randn(6, 4),
    index=pd.date_range('20230101', periods=6),
    columns=list('ABCD')
)

# 基本操作
print(df.head())      # 前5行
print(df.tail(3))     # 后3行
print(df.info())      # 信息
print(df.describe())  # 统计描述
print(df.shape)       # 形状
print(df.columns)     # 列名
print(df.index)       # 索引
```

### 数据选择

```python
# 选择列
df['A']               # 单列
df[['A', 'B']]        # 多列

# 选择行
df.loc['20230101']    # 按标签
df.iloc[0]            # 按位置
df.loc['20230101', 'A']  # 特定值
df.iloc[0:3, 0:2]     # 切片

# 条件筛选
df[df['A'] > 0]
df[(df['A'] > 0) & (df['B'] < 0)]
df.query('A > 0 and B < 0')
```

### 数据处理

```python
# 处理缺失值
df.dropna()                    # 删除含缺失值的行
df.fillna(0)                   # 填充0
df.fillna(method='ffill')      # 前向填充
df.fillna(df.mean())           # 用均值填充

# 删除重复值
df.drop_duplicates()

# 应用函数
df['A'].apply(lambda x: x ** 2)
df.apply(np.sum, axis=0)       # 按列
df.applymap(str)               # 每个元素

# 分组聚合
df.groupby('category')['sales'].sum()
df.groupby(['category', 'region']).agg({
    'sales': ['sum', 'mean'],
    'quantity': 'count'
})

# 透视表
pd.pivot_table(df, values='sales', index='category', 
               columns='region', aggfunc='sum')

# 合并数据
pd.concat([df1, df2], axis=0)  # 纵向合并
pd.concat([df1, df2], axis=1)  # 横向合并
pd.merge(df1, df2, on='key')   # SQL式合并
```

---

## 数据可视化

### Matplotlib

```python
import matplotlib.pyplot as plt
import numpy as np

# 设置中文字体
plt.rcParams['font.sans-serif'] = ['SimHei']
plt.rcParams['axes.unicode_minus'] = False

# 折线图
x = np.linspace(0, 10, 100)
y = np.sin(x)

plt.figure(figsize=(10, 6))
plt.plot(x, y, 'b-', linewidth=2, label='sin(x)')
plt.xlabel('X轴')
plt.ylabel('Y轴')
plt.title('正弦函数')
plt.legend()
plt.grid(True)
plt.savefig('sine.png')
plt.show()

# 多子图
fig, axes = plt.subplots(2, 2, figsize=(12, 10))
axes[0, 0].plot(x, np.sin(x))
axes[0, 1].plot(x, np.cos(x))
axes[1, 0].scatter(np.random.randn(100), np.random.randn(100))
axes[1, 1].hist(np.random.randn(1000), bins=30)
plt.tight_layout()
```

### Seaborn

```python
import seaborn as sns
import pandas as pd

# 设置样式
sns.set_style('whitegrid')

# 分布图
sns.histplot(data=df, x='column', kde=True)
sns.boxplot(data=df, x='category', y='value')

# 关系图
sns.scatterplot(data=df, x='x', y='y', hue='category')
sns.heatmap(df.corr(), annot=True, cmap='coolwarm')

# 分类图
sns.barplot(data=df, x='category', y='value')
```

---

## 完整分析流程

```python
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns

# 1. 数据加载
df = pd.read_csv('sales_data.csv')

# 2. 数据探索
print(df.head())
print(df.info())
print(df.describe())
print(df.isnull().sum())

# 3. 数据清洗
df = df.dropna()
df['date'] = pd.to_datetime(df['date'])
df['revenue'] = df['quantity'] * df['price']

# 4. 数据分析
monthly_sales = df.groupby(df['date'].dt.to_period('M'))['revenue'].sum()

# 5. 可视化
fig, axes = plt.subplots(2, 2, figsize=(15, 12))

sns.histplot(df['revenue'], ax=axes[0, 0], kde=True)
axes[0, 0].set_title('销售额分布')

monthly_sales.plot(ax=axes[0, 1])
axes[0, 1].set_title('月度销售趋势')

sns.heatmap(df[['quantity', 'price', 'revenue']].corr(), 
            annot=True, ax=axes[1, 0])
axes[1, 0].set_title('相关性分析')

plt.tight_layout()
plt.show()
```

---

**下一步**: [[03-方向C-机器学习|机器学习]] → 学习机器学习基础
